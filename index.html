<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; -webkit-text-stroke: #000000; min-height: 14.0px}
    span.s1 {font-kerning: none}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!DOCTYPE html&gt;</span></p>
<p class="p1"><span class="s1">&lt;html lang="en"&gt;</span></p>
<p class="p1"><span class="s1">&lt;head&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;title&gt;Mandala Creator&lt;/title&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;style&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>body {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-direction: column;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>min-height: 100vh;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: #f0f0f0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-family: Arial, sans-serif;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>h1 {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: #333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-direction: column;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 100%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>max-width: 900px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.canvas-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>position: relative;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 20px 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 0 10px rgba(0,0,0,0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>overflow: hidden;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>canvas {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: block;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>touch-action: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.controls {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gap: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 20px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.control-group {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-direction: column;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>align-items: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 0 5px rgba(0,0,0,0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>button {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 8px 16px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: #4A90E2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>color: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: none;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 4px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>button:hover {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: #3A80D2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>label {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>font-size: 14px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin-bottom: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>input[type="color"], input[type="range"] {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.color-palette {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gap: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.color-swatch {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>width: 25px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>height: 25px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 50%;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>cursor: pointer;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border: 2px solid transparent;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.color-swatch.active {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-color: #333;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.symmetry-options {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>display: flex;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>flex-wrap: wrap;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>gap: 5px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>justify-content: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>.instructions {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>max-width: 600px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>text-align: center;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>margin: 10px 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>padding: 10px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>background: white;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>border-radius: 8px;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>box-shadow: 0 0 5px rgba(0,0,0,0.1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>@media (max-width: 600px) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>.canvas-container {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>width: 90vw !important;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>height: 90vw !important;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>width: 100% !important;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>height: 100% !important;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</span></p>
<p class="p1"><span class="s1">&lt;/head&gt;</span></p>
<p class="p1"><span class="s1">&lt;body&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;div class="container"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;h1&gt;Mandala Creator&lt;/h1&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="instructions"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;p&gt;Create beautiful mandalas by drawing! Your strokes will be mirrored in a symmetrical pattern.&lt;/p&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="controls"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="control-group"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;label&gt;Stroke Color&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="color" id="colorPicker" value="#4A90E2"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="color-palette" id="colorPalette"&gt;&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="control-group"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;label&gt;Stroke Width: &lt;span id="brushSizeValue"&gt;5&lt;/span&gt;px&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="range" id="brushSize" min="1" max="20" value="5"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;div class="control-group"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;label&gt;Symmetry Lines: &lt;span id="symmetryValue"&gt;8&lt;/span&gt;&lt;/label&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;input type="range" id="symmetryLines" min="2" max="24" value="8"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;div class="symmetry-options"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="symmetry-preset" data-value="4"&gt;4&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="symmetry-preset" data-value="8"&gt;8&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>&lt;button class="symmetry-preset" data-value="12"&gt;12&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="canvas-container" id="canvasContainer"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;canvas id="mandalaCanvas"&gt;&lt;/canvas&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;div class="controls"&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="clearButton"&gt;Clear Canvas&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="saveButton"&gt;Save Mandala&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>&lt;button id="undoButton"&gt;Undo Last Stroke&lt;/button&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p2"><span class="s1"></span><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;script&gt;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>document.addEventListener('DOMContentLoaded', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const canvas = document.getElementById('mandalaCanvas');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const ctx = canvas.getContext('2d');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const canvasContainer = document.getElementById('canvasContainer');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const colorPicker = document.getElementById('colorPicker');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const brushSize = document.getElementById('brushSize');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const brushSizeValue = document.getElementById('brushSizeValue');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const symmetryLines = document.getElementById('symmetryLines');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const symmetryValue = document.getElementById('symmetryValue');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const clearButton = document.getElementById('clearButton');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const saveButton = document.getElementById('saveButton');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const undoButton = document.getElementById('undoButton');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const colorPalette = document.getElementById('colorPalette');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let isDrawing = false;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let lastX = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let lastY = 0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let pathHistory = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>let currentPath = [];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Set initial canvas size</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function setupCanvas() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const size = Math.min(window.innerWidth * 0.8, 500);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.width = size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.height = size;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvasContainer.style.width = `${size}px`;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvasContainer.style.height = `${size}px`;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Clear canvas with white background</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fillStyle = 'white';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fillRect(0, 0, canvas.width, canvas.height);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Draw guidelines for symmetry</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>drawSymmetryGuides();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Setup color palette with some nice colors</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>const colors = [</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>'#4A90E2', '#50E3C2', '#B8E986', '#F8E71C',<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>'#F5A623', '#D0021B', '#9013FE', '#7ED321',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>'#000000', '#333333', '#666666', '#999999'</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>colors.forEach(color =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const swatch = document.createElement('div');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>swatch.classList.add('color-swatch');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>swatch.style.backgroundColor = color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>swatch.addEventListener('click', () =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>colorPicker.value = color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>document.querySelectorAll('.color-swatch').forEach(s =&gt; s.classList.remove('active'));</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>swatch.classList.add('active');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>colorPalette.appendChild(swatch);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Mark the initial color as active</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>colorPalette.firstChild.classList.add('active');</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Drawing functions</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function startDrawing(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isDrawing = true;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Get coordinates relative to canvas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const rect = canvas.getBoundingClientRect();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const x = e.clientX - rect.left;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const y = e.clientY - rect.top;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>lastX = x;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>lastY = y;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Start a new path for this stroke</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>currentPath = [{</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>type: 'start',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>x: x,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>y: y,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>color: colorPicker.value,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>width: brushSize.value</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}];</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>drawMandalaPoint(x, y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function draw(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!isDrawing) return;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Get coordinates relative to canvas</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const rect = canvas.getBoundingClientRect();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const x = e.clientX - rect.left;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const y = e.clientY - rect.top;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Add this point to the current path</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>currentPath.push({</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>type: 'line',</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>x0: lastX,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>y0: lastY,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>x1: x,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>y1: y,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>color: colorPicker.value,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>width: brushSize.value</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>drawMandalaLine(lastX, lastY, x, y);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>lastX = x;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>lastY = y;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function endDrawing() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (!isDrawing) return;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>isDrawing = false;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Save this path to the history</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (currentPath.length &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>pathHistory.push(currentPath);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>currentPath = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function drawMandalaPoint(x, y) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const centerX = canvas.width / 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const centerY = canvas.height / 2;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Draw original point</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.arc(x, y, brushSize.value / 2, 0, Math.PI * 2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fillStyle = colorPicker.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fill();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Draw symmetric points</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const numLines = parseInt(symmetryLines.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const angleIncrement = (Math.PI * 2) / numLines;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Calculate vector from center</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const dx = x - centerX;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const dy = y - centerY;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const distance = Math.sqrt(dx * dx + dy * dy);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const angle = Math.atan2(dy, dx);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 1; i &lt; numLines; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newAngle = angle + angleIncrement * i;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newX = centerX + Math.cos(newAngle) * distance;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newY = centerY + Math.sin(newAngle) * distance;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.arc(newX, newY, brushSize.value / 2, 0, Math.PI * 2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.fillStyle = colorPicker.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.fill();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function drawMandalaLine(x0, y0, x1, y1) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const centerX = canvas.width / 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const centerY = canvas.height / 2;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Draw original line</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.moveTo(x0, y0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.lineTo(x1, y1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.strokeStyle = colorPicker.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.lineWidth = brushSize.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.lineCap = 'round';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.stroke();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Draw symmetric lines</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const numLines = parseInt(symmetryLines.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const angleIncrement = (Math.PI * 2) / numLines;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Calculate vectors from center</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const dx0 = x0 - centerX;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const dy0 = y0 - centerY;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const distance0 = Math.sqrt(dx0 * dx0 + dy0 * dy0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const angle0 = Math.atan2(dy0, dx0);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const dx1 = x1 - centerX;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const dy1 = y1 - centerY;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const distance1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const angle1 = Math.atan2(dy1, dx1);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 1; i &lt; numLines; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newAngle0 = angle0 + angleIncrement * i;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newX0 = centerX + Math.cos(newAngle0) * distance0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newY0 = centerY + Math.sin(newAngle0) * distance0;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newAngle1 = angle1 + angleIncrement * i;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newX1 = centerX + Math.cos(newAngle1) * distance1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const newY1 = centerY + Math.sin(newAngle1) * distance1;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.moveTo(newX0, newY0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.lineTo(newX1, newY1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.strokeStyle = colorPicker.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.lineWidth = brushSize.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.lineCap = 'round';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.stroke();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function drawSymmetryGuides() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Clear the canvas first</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fillStyle = 'white';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.fillRect(0, 0, canvas.width, canvas.height);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const centerX = canvas.width / 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const centerY = canvas.height / 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const radius = Math.max(Math.min(centerX, centerY) - 10, 1);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Draw a light circle for the mandala boundary</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.strokeStyle = '#e0e0e0';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.lineWidth = 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.stroke();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Draw symmetry lines</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const numLines = parseInt(symmetryLines.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const angleIncrement = (Math.PI * 2) / numLines;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>for (let i = 0; i &lt; numLines; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const angle = i * angleIncrement;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const x = centerX + Math.cos(angle) * radius;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const y = centerY + Math.sin(angle) * radius;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                    </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.moveTo(centerX, centerY);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>ctx.lineTo(x, y);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.strokeStyle = '#f0f0f0';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.lineWidth = 1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>ctx.stroke();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Redraw all paths</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>redrawPaths();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>function redrawPaths() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>// Redraw all paths from history</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pathHistory.forEach(path =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>path.forEach(point =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>if (point.type === 'start') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>// Just set up for the next lines</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>lastX = point.x;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>lastY = point.y;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>} else if (point.type === 'line') {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>// Draw the line with its original properties</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>ctx.moveTo(point.x0, point.y0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>ctx.lineTo(point.x1, point.y1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>ctx.strokeStyle = point.color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>ctx.lineWidth = point.width;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>ctx.lineCap = 'round';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>ctx.stroke();</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>// Draw symmetric lines</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const centerX = canvas.width / 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const centerY = canvas.height / 2;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const numLines = parseInt(symmetryLines.value);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const angleIncrement = (Math.PI * 2) / numLines;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>// Calculate vectors from center</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const dx0 = point.x0 - centerX;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const dy0 = point.y0 - centerY;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const distance0 = Math.sqrt(dx0 * dx0 + dy0 * dy0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const angle0 = Math.atan2(dy0, dx0);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const dx1 = point.x1 - centerX;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const dy1 = point.y1 - centerY;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const distance1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>const angle1 = Math.atan2(dy1, dx1);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>for (let i = 1; i &lt; numLines; i++) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>const newAngle0 = angle0 + angleIncrement * i;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>const newX0 = centerX + Math.cos(newAngle0) * distance0;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>const newY0 = centerY + Math.sin(newAngle0) * distance0;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>const newAngle1 = angle1 + angleIncrement * i;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>const newX1 = centerX + Math.cos(newAngle1) * distance1;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>const newY1 = centerY + Math.sin(newAngle1) * distance1;</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">                                </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>ctx.beginPath();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>ctx.moveTo(newX0, newY0);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>ctx.lineTo(newX1, newY1);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>ctx.strokeStyle = point.color;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>ctx.lineWidth = point.width;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>ctx.lineCap = 'round';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                                </span>ctx.stroke();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                            </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Event listeners</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas.addEventListener('mousedown', startDrawing);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas.addEventListener('mousemove', draw);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas.addEventListener('mouseup', endDrawing);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas.addEventListener('mouseout', endDrawing);</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Touch support</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas.addEventListener('touchstart', function(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const touch = e.touches[0];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const mouseEvent = new MouseEvent('mousedown', {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>clientX: touch.clientX,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>clientY: touch.clientY</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.dispatchEvent(mouseEvent);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas.addEventListener('touchmove', function(e) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>e.preventDefault();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const touch = e.touches[0];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const mouseEvent = new MouseEvent('mousemove', {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>clientX: touch.clientX,</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>clientY: touch.clientY</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.dispatchEvent(mouseEvent);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>canvas.addEventListener('touchend', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const mouseEvent = new MouseEvent('mouseup');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>canvas.dispatchEvent(mouseEvent);</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// UI controls</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>brushSize.addEventListener('input', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>brushSizeValue.textContent = this.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>symmetryLines.addEventListener('input', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>symmetryValue.textContent = this.value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>drawSymmetryGuides();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>document.querySelectorAll('.symmetry-preset').forEach(button =&gt; {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>button.addEventListener('click', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>const value = this.getAttribute('data-value');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>symmetryLines.value = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>symmetryValue.textContent = value;</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>drawSymmetryGuides();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>clearButton.addEventListener('click', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>pathHistory = [];</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>drawSymmetryGuides();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>saveButton.addEventListener('click', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>const link = document.createElement('a');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>link.download = 'mandala.png';</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>link.href = canvas.toDataURL('image/png');</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>link.click();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>undoButton.addEventListener('click', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>if (pathHistory.length &gt; 0) {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>pathHistory.pop();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                    </span>drawSymmetryGuides();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Handle window resize</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>window.addEventListener('resize', function() {</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">                </span>setupCanvas();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p2"><span class="s1"><span class="Apple-converted-space">            </span></span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>// Initialize</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">            </span>setupCanvas();</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</span></p>
<p class="p1"><span class="s1">&lt;/body&gt;</span></p>
<p class="p1"><span class="s1">&lt;/html&gt;</span></p>
</body>
</html>
